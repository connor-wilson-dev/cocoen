{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/js/cocoen.js"],"names":[],"mappings":"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","file":"cocoen.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","class Cocoen {\n  constructor(element, options) {\n    this.options = Object.assign({}, Cocoen.defaults, options);\n    this.element = element || document.querySelector('.cocoen');\n\n    // bind event handlers\n    this.handleTap = this.onTap.bind(this);\n    this.handleDrag = this.onDrag.bind(this);\n    this.handleDragStart = this.onDragStart.bind(this);\n    this.handleDragEnd = this.onDragEnd.bind(this);\n    this.handleResize = this.dimensions.bind(this);\n\n    this.init();\n  }\n\n  init() {\n    // If already active, escape\n    if (this.isActive) return;\n    this.createElements();\n    this.addEventListeners();\n    this.dimensions();\n\n    // Set flag\n    this.isActive = true;\n  }\n\n  destroy() {\n    if (!this.isActive) return;\n\n    this.removeEventListeners();\n    this.destroyElements();\n    this.cleanUp();\n\n    this.isActive = false;\n  }\n\n  createElements() {\n    // Create drag element\n    const span = document.createElement('span');\n    span.className = this.options.dragElementSelector.replace('.', '');\n    this.element.appendChild(span);\n    // Wrap first image in div\n    const wrapper = document.createElement('div');\n    const firstImage = this.element.querySelector('img:first-child');\n    wrapper.appendChild(firstImage.cloneNode(true));\n    firstImage.parentNode.replaceChild(wrapper, firstImage);\n    // Set class elements we need later\n    this.dragElement = this.element.querySelector(this.options.dragElementSelector);\n    this.beforeElement = this.element.querySelector('div:first-child');\n    this.beforeImage = this.beforeElement.querySelector('img');\n  }\n\n  destroyElements() {\n    this.element.replaceChild(this.beforeImage, this.beforeElement);\n    this.element.removeChild(this.dragElement);\n  }\n\n  addEventListeners() {\n    this.element.addEventListener('click', this.handleTap);\n    this.element.addEventListener('mousemove', this.handleDrag);\n    this.element.addEventListener('touchmove', this.handleDrag);\n    this.dragElement.addEventListener('mousedown', this.handleDragStart);\n    this.dragElement.addEventListener('touchstart', this.handleDragStart);\n\n    window.addEventListener('mouseup', this.handleDragEnd);\n    window.addEventListener('resize', this.handleResize);\n  }\n\n  removeEventListeners() {\n    this.element.removeEventListener('click', this.handleTap);\n    this.element.removeEventListener('mousemove', this.handleDrag);\n    this.element.removeEventListener('touchmove', this.handleDrag);\n    this.dragElement.removeEventListener('mousedown', this.handleDragStart);\n    this.dragElement.removeEventListener('touchstart', this.handleDragStart);\n\n    window.removeEventListener('mouseup', this.handleDragEnd);\n    window.removeEventListener('resize', this.handleResize);\n  }\n\n  cleanUp() {\n    this.dragElement = null;\n    this.beforeElement = null;\n    this.beforeImage.style.removeProperty('width');\n  }\n\n  dimensions() {\n    this.elementWidth = parseInt(window.getComputedStyle(this.element).width, 10);\n    this.elementOffsetLeft = this.element.getBoundingClientRect().left + document.body.scrollLeft;\n    this.beforeImage.style.width = `${this.elementWidth}px`;\n    this.dragElementWidth = parseInt(window.getComputedStyle(this.dragElement).width, 10);\n    this.minLeftPos = this.elementOffsetLeft + 10;\n    this.maxLeftPos = (this.elementOffsetLeft + this.elementWidth) - this.dragElementWidth - 10;\n  }\n\n  onTap(e) {\n    e.preventDefault();\n\n    this.leftPos = (e.pageX) ? e.pageX : e.touches[0].pageX;\n    this.requestDrag();\n  }\n\n  onDragStart(e) {\n    e.preventDefault();\n\n    const startX = (e.pageX) ? e.pageX : e.touches[0].pageX;\n    const offsetLeft = this.dragElement.getBoundingClientRect().left + document.body.scrollLeft;\n    this.posX = (offsetLeft + this.dragElementWidth) - startX;\n    this.isDragging = true;\n  }\n\n  onDragEnd(e) {\n    e.preventDefault();\n    this.isDragging = false;\n  }\n\n  onDrag(e) {\n    e.preventDefault();\n\n    if (!this.isDragging) {\n      return;\n    }\n\n    this.moveX = (e.pageX) ? e.pageX : e.touches[0].pageX;\n    this.leftPos = (this.moveX + this.posX) - this.dragElementWidth;\n\n    this.requestDrag();\n  }\n\n  drag() {\n    if (this.leftPos < this.minLeftPos) {\n      this.leftPos = this.minLeftPos;\n    } else if (this.leftPos > this.maxLeftPos) {\n      this.leftPos = this.maxLeftPos;\n    }\n\n    let openRatio = (this.leftPos + (this.dragElementWidth / 2)) - this.elementOffsetLeft;\n    openRatio /= this.elementWidth;\n    const width = `${openRatio * 100}%`;\n\n    this.dragElement.style.left = width;\n    this.beforeElement.style.width = width;\n\n    if (this.options.dragCallback) {\n      this.options.dragCallback(openRatio);\n    }\n  }\n\n  requestDrag() {\n    window.requestAnimationFrame(this.drag.bind(this));\n  }\n}\n\nCocoen.defaults = {\n  dragElementSelector: '.cocoen-drag',\n  dragCallback: null,\n};\n\nmodule.exports = Cocoen;\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvY29jb2VuLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7SUNBTSxNO0FBQ0osa0JBQVksT0FBWixFQUFxQixPQUFyQixFQUE4QjtBQUFBOztBQUM1QixTQUFLLE9BQUwsR0FBZSxTQUFjLEVBQWQsRUFBa0IsT0FBTyxRQUF6QixFQUFtQyxPQUFuQyxDQUFmO0FBQ0EsU0FBSyxPQUFMLEdBQWUsV0FBVyxTQUFTLGFBQVQsQ0FBdUIsU0FBdkIsQ0FBMUI7O0FBRUE7QUFDQSxTQUFLLFNBQUwsR0FBaUIsS0FBSyxLQUFMLENBQVcsSUFBWCxDQUFnQixJQUFoQixDQUFqQjtBQUNBLFNBQUssVUFBTCxHQUFrQixLQUFLLE1BQUwsQ0FBWSxJQUFaLENBQWlCLElBQWpCLENBQWxCO0FBQ0EsU0FBSyxlQUFMLEdBQXVCLEtBQUssV0FBTCxDQUFpQixJQUFqQixDQUFzQixJQUF0QixDQUF2QjtBQUNBLFNBQUssYUFBTCxHQUFxQixLQUFLLFNBQUwsQ0FBZSxJQUFmLENBQW9CLElBQXBCLENBQXJCO0FBQ0EsU0FBSyxZQUFMLEdBQW9CLEtBQUssVUFBTCxDQUFnQixJQUFoQixDQUFxQixJQUFyQixDQUFwQjs7QUFFQSxTQUFLLElBQUw7QUFDRDs7OzsyQkFFTTtBQUNMO0FBQ0EsVUFBSSxLQUFLLFFBQVQsRUFBbUI7QUFDbkIsV0FBSyxjQUFMO0FBQ0EsV0FBSyxpQkFBTDtBQUNBLFdBQUssVUFBTDs7QUFFQTtBQUNBLFdBQUssUUFBTCxHQUFnQixJQUFoQjtBQUNEOzs7OEJBRVM7QUFDUixVQUFJLENBQUMsS0FBSyxRQUFWLEVBQW9COztBQUVwQixXQUFLLG9CQUFMO0FBQ0EsV0FBSyxlQUFMO0FBQ0EsV0FBSyxPQUFMOztBQUVBLFdBQUssUUFBTCxHQUFnQixLQUFoQjtBQUNEOzs7cUNBRWdCO0FBQ2Y7QUFDQSxVQUFNLE9BQU8sU0FBUyxhQUFULENBQXVC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O0FBQ0wsVUFBSSxLQUFLLE9BQUwsR0FBZSxLQUFLLFVBQXhCLEVBQW9DO0FBQ2xDLGFBQUssT0FBTCxHQUFlLEtBQUssVUFBcEI7QUFDRCxPQUZELE1BRU8sSUFBSSxLQUFLLE9BQUwsR0FBZSxLQUFLLFVBQXhCLEVBQW9DO0FBQ3pDLGFBQUssT0FBTCxHQUFlLEtBQUssVUFBcEI7QUFDRDs7QUFFRCxVQUFJLFlBQWEsS0FBSyxPQUFMLEdBQWdCLEtBQUssZ0JBQUwsR0FBd0IsQ0FBekMsR0FBK0MsS0FBSyxpQkFBcEU7QUFDQSxtQkFBYSxLQUFLLFlBQWxCO0FBQ0EsVUFBTSxRQUFXLFlBQVksR0FBdkIsTUFBTjs7QUFFQSxXQUFLLFdBQUwsQ0FBaUIsS0FBakIsQ0FBdUIsSUFBdkIsR0FBOEIsS0FBOUI7QUFDQSxXQUFLLGFBQUwsQ0FBbUIsS0FBbkIsQ0FBeUIsS0FBekIsR0FBaUMsS0FBakM7O0FBRUEsVUFBSSxLQUFLLE9BQUwsQ0FBYSxZQUFqQixFQUErQjtBQUM3QixhQUFLLE9BQUwsQ0FBYSxZQUFiLENBQTBCLFNBQTFCO0FBQ0Q7QUFDRjs7O2tDQUVhO0FBQ1osYUFBTyxxQkFBUCxDQUE2QixLQUFLLElBQUwsQ0FBVSxJQUFWLENBQWUsSUFBZixDQUE3QjtBQUNEOzs7Ozs7QUFHSCxPQUFPLFFBQVAsR0FBa0I7QUFDaEIsdUJBQXFCLGNBREw7QUFFaEIsZ0JBQWM7QUFGRSxDQUFsQjs7QUFLQSxPQUFPLE9BQVAsR0FBaUIsTUFBakIiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiY2xhc3MgQ29jb2VuIHtcbiAgY29uc3RydWN0b3IoZWxlbWVudCwgb3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIENvY29lbi5kZWZhdWx0cywgb3B0aW9ucyk7XG4gICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudCB8fCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29jb2VuJyk7XG5cbiAgICAvLyBiaW5kIGV2ZW50IGhhbmRsZXJzXG4gICAgdGhpcy5oYW5kbGVUYXAgPSB0aGlzLm9uVGFwLmJpbmQodGhpcyk7XG4gICAgdGhpcy5oYW5kbGVEcmFnID0gdGhpcy5vbkRyYWcuYmluZCh0aGlzKTtcbiAgICB0aGlzLmhhbmRsZURyYWdTdGFydCA9IHRoaXMub25EcmFnU3RhcnQuYmluZCh0aGlzKTtcbiAgICB0aGlzLmhhbmRsZURyYWdFbmQgPSB0aGlzLm9uRHJhZ0VuZC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuaGFuZGxlUmVzaXplID0gdGhpcy5kaW1lbnNpb25zLmJpbmQodGhpcyk7XG5cbiAgICB0aGlzLmluaXQoKTtcbiAgfVxuXG4gIGluaXQoKSB7XG4gICAgLy8gSWYgYWxyZWFkeSBhY3RpdmUsIGVzY2FwZVxuICAgIGlmICh0aGlzLmlzQWN0aXZlKSByZXR1cm47XG4gICAgdGhpcy5jcmVhdGVFbGVtZW50cygpO1xuICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLmRpbWVuc2lvbnMoKTtcblxuICAgIC8vIFNldCBmbGFnXG4gICAgdGhpcy5pc0FjdGl2ZSA9IHRydWU7XG4gIH1cblxuICBkZXN0cm95KCkge1xuICAgIGlmICghdGhpcy5pc0FjdGl2ZSkgcmV0dXJuO1xuXG4gICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuZGVzdHJveUVsZW1lbnRzKCk7XG4gICAgdGhpcy5jbGVhblVwKCk7XG5cbiAgICB0aGlzLmlzQWN0aXZlID0gZmFsc2U7XG4gIH1cblxuICBjcmVhdGVFbGVtZW50cygpIHtcbiAgICAvLyBDcmVhdGUgZHJhZyBlbGVtZW50XG4gICAgY29uc3Qgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICBzcGFuLmNsYXNzTmFtZSA9IHRoaXMub3B0aW9ucy5kcmFnRWxlbWVudFNlbGVjdG9yLnJlcGxhY2UoJy4nLCAnJyk7XG4gICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKHNwYW4pO1xuICAgIC8vIFdyYXAgZmlyc3QgaW1hZ2UgaW4gZGl2XG4gICAgY29uc3Qgd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNvbnN0IGZpcnN0SW1hZ2UgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignaW1nOmZpcnN0LWNoaWxkJyk7XG4gICAgd3JhcHBlci5hcHBlbmRDaGlsZChmaXJzdEltYWdlLmNsb25lTm9kZSh0cnVlKSk7XG4gICAgZmlyc3RJbWFnZS5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZCh3cmFwcGVyLCBmaXJzdEltYWdlKTtcbiAgICAvLyBTZXQgY2xhc3MgZWxlbWVudHMgd2UgbmVlZCBsYXRlclxuICAgIHRoaXMuZHJhZ0VsZW1lbnQgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLm9wdGlvbnMuZHJhZ0VsZW1lbnRTZWxlY3Rvcik7XG4gICAgdGhpcy5iZWZvcmVFbGVtZW50ID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ2RpdjpmaXJzdC1jaGlsZCcpO1xuICAgIHRoaXMuYmVmb3JlSW1hZ2UgPSB0aGlzLmJlZm9yZUVsZW1lbnQucXVlcnlTZWxlY3RvcignaW1nJyk7XG4gIH1cblxuICBkZXN0cm95RWxlbWVudHMoKSB7XG4gICAgdGhpcy5lbGVtZW50LnJlcGxhY2VDaGlsZCh0aGlzLmJlZm9yZUltYWdlLCB0aGlzLmJlZm9yZUVsZW1lbnQpO1xuICAgIHRoaXMuZWxlbWVudC5yZW1vdmVDaGlsZCh0aGlzLmRyYWdFbGVtZW50KTtcbiAgfVxuXG4gIGFkZEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGFuZGxlVGFwKTtcbiAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5oYW5kbGVEcmFnKTtcbiAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy5oYW5kbGVEcmFnKTtcbiAgICB0aGlzLmRyYWdFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMuaGFuZGxlRHJhZ1N0YXJ0KTtcbiAgICB0aGlzLmRyYWdFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCB0aGlzLmhhbmRsZURyYWdTdGFydCk7XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMuaGFuZGxlRHJhZ0VuZCk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMuaGFuZGxlUmVzaXplKTtcbiAgfVxuXG4gIHJlbW92ZUV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGFuZGxlVGFwKTtcbiAgICB0aGlzLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5oYW5kbGVEcmFnKTtcbiAgICB0aGlzLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy5oYW5kbGVEcmFnKTtcbiAgICB0aGlzLmRyYWdFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMuaGFuZGxlRHJhZ1N0YXJ0KTtcbiAgICB0aGlzLmRyYWdFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCB0aGlzLmhhbmRsZURyYWdTdGFydCk7XG5cbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMuaGFuZGxlRHJhZ0VuZCk7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMuaGFuZGxlUmVzaXplKTtcbiAgfVxuXG4gIGNsZWFuVXAoKSB7XG4gICAgdGhpcy5kcmFnRWxlbWVudCA9IG51bGw7XG4gICAgdGhpcy5iZWZvcmVFbGVtZW50ID0gbnVsbDtcbiAgICB0aGlzLmJlZm9yZUltYWdlLnN0eWxlLnJlbW92ZVByb3BlcnR5KCd3aWR0aCcpO1xuICB9XG5cbiAgZGltZW5zaW9ucygpIHtcbiAgICB0aGlzLmVsZW1lbnRXaWR0aCA9IHBhcnNlSW50KHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXMuZWxlbWVudCkud2lkdGgsIDEwKTtcbiAgICB0aGlzLmVsZW1lbnRPZmZzZXRMZWZ0ID0gdGhpcy5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQgKyBkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQ7XG4gICAgdGhpcy5iZWZvcmVJbWFnZS5zdHlsZS53aWR0aCA9IGAke3RoaXMuZWxlbWVudFdpZHRofXB4YDtcbiAgICB0aGlzLmRyYWdFbGVtZW50V2lkdGggPSBwYXJzZUludCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmRyYWdFbGVtZW50KS53aWR0aCwgMTApO1xuICAgIHRoaXMubWluTGVmdFBvcyA9IHRoaXMuZWxlbWVudE9mZnNldExlZnQgKyAxMDtcbiAgICB0aGlzLm1heExlZnRQb3MgPSAodGhpcy5lbGVtZW50T2Zmc2V0TGVmdCArIHRoaXMuZWxlbWVudFdpZHRoKSAtIHRoaXMuZHJhZ0VsZW1lbnRXaWR0aCAtIDEwO1xuICB9XG5cbiAgb25UYXAoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgIHRoaXMubGVmdFBvcyA9IChlLnBhZ2VYKSA/IGUucGFnZVggOiBlLnRvdWNoZXNbMF0ucGFnZVg7XG4gICAgdGhpcy5yZXF1ZXN0RHJhZygpO1xuICB9XG5cbiAgb25EcmFnU3RhcnQoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgIGNvbnN0IHN0YXJ0WCA9IChlLnBhZ2VYKSA/IGUucGFnZVggOiBlLnRvdWNoZXNbMF0ucGFnZVg7XG4gICAgY29uc3Qgb2Zmc2V0TGVmdCA9IHRoaXMuZHJhZ0VsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCArIGRvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdDtcbiAgICB0aGlzLnBvc1ggPSAob2Zmc2V0TGVmdCArIHRoaXMuZHJhZ0VsZW1lbnRXaWR0aCkgLSBzdGFydFg7XG4gICAgdGhpcy5pc0RyYWdnaW5nID0gdHJ1ZTtcbiAgfVxuXG4gIG9uRHJhZ0VuZChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHRoaXMuaXNEcmFnZ2luZyA9IGZhbHNlO1xuICB9XG5cbiAgb25EcmFnKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICBpZiAoIXRoaXMuaXNEcmFnZ2luZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMubW92ZVggPSAoZS5wYWdlWCkgPyBlLnBhZ2VYIDogZS50b3VjaGVzWzBdLnBhZ2VYO1xuICAgIHRoaXMubGVmdFBvcyA9ICh0aGlzLm1vdmVYICsgdGhpcy5wb3NYKSAtIHRoaXMuZHJhZ0VsZW1lbnRXaWR0aDtcblxuICAgIHRoaXMucmVxdWVzdERyYWcoKTtcbiAgfVxuXG4gIGRyYWcoKSB7XG4gICAgaWYgKHRoaXMubGVmdFBvcyA8IHRoaXMubWluTGVmdFBvcykge1xuICAgICAgdGhpcy5sZWZ0UG9zID0gdGhpcy5taW5MZWZ0UG9zO1xuICAgIH0gZWxzZSBpZiAodGhpcy5sZWZ0UG9zID4gdGhpcy5tYXhMZWZ0UG9zKSB7XG4gICAgICB0aGlzLmxlZnRQb3MgPSB0aGlzLm1heExlZnRQb3M7XG4gICAgfVxuXG4gICAgbGV0IG9wZW5SYXRpbyA9ICh0aGlzLmxlZnRQb3MgKyAodGhpcy5kcmFnRWxlbWVudFdpZHRoIC8gMikpIC0gdGhpcy5lbGVtZW50T2Zmc2V0TGVmdDtcbiAgICBvcGVuUmF0aW8gLz0gdGhpcy5lbGVtZW50V2lkdGg7XG4gICAgY29uc3Qgd2lkdGggPSBgJHtvcGVuUmF0aW8gKiAxMDB9JWA7XG5cbiAgICB0aGlzLmRyYWdFbGVtZW50LnN0eWxlLmxlZnQgPSB3aWR0aDtcbiAgICB0aGlzLmJlZm9yZUVsZW1lbnQuc3R5bGUud2lkdGggPSB3aWR0aDtcblxuICAgIGlmICh0aGlzLm9wdGlvbnMuZHJhZ0NhbGxiYWNrKSB7XG4gICAgICB0aGlzLm9wdGlvbnMuZHJhZ0NhbGxiYWNrKG9wZW5SYXRpbyk7XG4gICAgfVxuICB9XG5cbiAgcmVxdWVzdERyYWcoKSB7XG4gICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLmRyYWcuYmluZCh0aGlzKSk7XG4gIH1cbn1cblxuQ29jb2VuLmRlZmF1bHRzID0ge1xuICBkcmFnRWxlbWVudFNlbGVjdG9yOiAnLmNvY29lbi1kcmFnJyxcbiAgZHJhZ0NhbGxiYWNrOiBudWxsLFxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBDb2NvZW47XG4iXX0="}